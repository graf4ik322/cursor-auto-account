# Система управления аккаунтами Cursor

Этот проект разработан на основе работ других разработчиков. [Исходный проект](https://github.com/chengazhen/cursor-auto-free) [Референсный проект](https://github.com/yeongpin/cursor-free-vip)

Проект только что запущен, в нем еще много багов, которые будут исправляться постепенно.

Это веб-сервис для управления аккаунтами Cursor, поддерживающий автоматическую регистрацию, хранение информации об аккаунтах, просмотр и изменение статуса аккаунтов.

[Демо-сайт](https://cursor-account.zoowayss.dpdns.org)

Ресурсы ограничены, пожалуйста, не злоупотребляйте аккаунтами

![img.png](./.assets/image.png)

## Как использовать

Нажмите "Получить аккаунт", этот процесс может занять много времени, пожалуйста, наберитесь терпения. Не нажимайте кнопку получения аккаунта несколько раз подряд, ресурсы сервера ограничены. После получения аккаунта появится всплывающее окно, скопируйте данные оттуда.
![img.png](./.assets/image-1745820621145.png)

Получив логин и пароль, войдите в свой браузер, [перейдите сюда](https://tempmail.plus/en/#!) для получения кода подтверждения

![image-20250428115252533](./.assets/image-20250428115252533.png)

## Возможности

- Автоматическая регистрация аккаунтов Cursor с сохранением в MySQL базу данных
- Предоставление RESTful API для получения аккаунтов
- Веб-интерфейс для просмотра и управления всеми аккаунтами
- Поддержка копирования информации об аккаунтах одним кликом
- Возможность изменения статуса использования аккаунтов
- Развертывание в Docker контейнерах

## Текущие проблемы

1. При регистрации слишком большого количества аккаунтов на одном домене все аккаунты могут стать недействительными. В будущем здесь будет использоваться домен, предоставленный пользователем - каждый будет использовать свой домен.

   Что делать, если у вас нет домена? [Смотрите здесь](https://linux.do/t/topic/26864)

   Если у вас есть домен, также нужно настроить переадресацию email через Cloudflare

## Быстрый старт

### Развертывание с помощью Docker Compose (рекомендуется)

#### Шаг 1: Клонирование репозитория
```bash
git clone https://github.com/zoowayss/cursor-auto-account.git
cd cursor-auto-account
```

#### Шаг 2: Настройка переменных окружения

Создайте файл `.env` в корневой папке проекта и настройте следующие переменные окружения:

```env
# === НАСТРОЙКИ БАЗЫ ДАННЫХ ===
# Хост базы данных MySQL (обычно localhost для локальной установки)
DB_HOST=localhost

# Порт базы данных MySQL (по умолчанию 3306)
DB_PORT=3306

# Имя пользователя базы данных (обычно root для локальной установки)
DB_USER=root

# Пароль базы данных (установите надежный пароль)
DB_PASSWORD=your_secure_password

# Название базы данных (создастся автоматически, если не существует)
DB_NAME=cursor_accounts

# === НАСТРОЙКИ БЕЗОПАСНОСТИ ===
# Секретный ключ для JWT токенов (сгенерируйте случайную строку)
SECRET_KEY=your_random_secret_key_here

# Срок действия токенов в днях (по умолчанию 30 дней)
TOKEN_EXPIRY_DAYS=30

# === НАСТРОЙКИ АДМИНИСТРАТОРА ===
# Имя пользователя администратора (по умолчанию admin)
ADMIN_USERNAME=admin

# Пароль администратора (обязательно измените!)
ADMIN_PASSWORD=your_admin_password

# === НАСТРОЙКИ EMAIL ===
# Домен для email адресов (используется при регистрации аккаунтов)
EMAIL_DOMAIN=your_email_domain.com

# === НАСТРОЙКИ СЕРВЕРА ===
# Хост для запуска приложения (обычно 0.0.0.0 для всех интерфейсов)
HOST=0.0.0.0

# Порт для запуска приложения (по умолчанию 8001)
PORT=8001

# Режим отладки (true/false, по умолчанию false для продакшена)
DEBUG=false
```

#### Подробное описание переменных окружения:

**DB_HOST** - Адрес сервера базы данных MySQL. Если база данных установлена на том же сервере, используйте `localhost`. Если база данных на удаленном сервере, укажите IP-адрес или доменное имя.

**DB_PORT** - Порт MySQL сервера. Стандартный порт - 3306. Измените только если ваш MySQL работает на другом порту.

**DB_USER** - Имя пользователя для подключения к MySQL. Обычно `root` для локальной установки. Для продакшена рекомендуется создать отдельного пользователя с ограниченными правами.

**DB_PASSWORD** - Пароль пользователя MySQL. Обязательно используйте надежный пароль! Не используйте простые пароли типа "123456" или "password".

**DB_NAME** - Название базы данных. База данных будет создана автоматически при первом запуске, если она не существует.

**SECRET_KEY** - Секретный ключ для подписи JWT токенов. Должен быть длинной случайной строкой. Можете сгенерировать его командой:
```bash
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

**TOKEN_EXPIRY_DAYS** - Количество дней, в течение которых действительны JWT токены. По умолчанию 30 дней.

**ADMIN_USERNAME** - Имя пользователя для входа в административную панель. По умолчанию `admin`.

**ADMIN_PASSWORD** - Пароль администратора. Обязательно измените на надежный пароль!

**EMAIL_DOMAIN** - Домен, который будет использоваться для создания временных email адресов при регистрации аккаунтов Cursor. Это должен быть ваш собственный домен с настроенной переадресацией email.

**HOST** - IP-адрес, на котором будет слушать приложение. `0.0.0.0` означает все сетевые интерфейсы.

**PORT** - Порт, на котором будет работать приложение. По умолчанию 8001.

**DEBUG** - Режим отладки. Установите `true` только для разработки. В продакшене всегда `false`.

#### Шаг 3: Установка и настройка MySQL (если не установлен)

Если у вас еще нет MySQL, установите его:

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install mysql-server
sudo mysql_secure_installation
```

**CentOS/RHEL:**
```bash
sudo yum install mysql-server
sudo systemctl start mysqld
sudo mysql_secure_installation
```

**Создание базы данных и пользователя:**
```bash
sudo mysql -u root -p
```

В MySQL консоли выполните:
```sql
CREATE DATABASE cursor_accounts CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'cursor_user'@'localhost' IDENTIFIED BY 'your_secure_password';
GRANT ALL PRIVILEGES ON cursor_accounts.* TO 'cursor_user'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

Затем обновите `.env` файл:
```env
DB_USER=cursor_user
DB_PASSWORD=your_secure_password
```

#### Шаг 4: Запуск сервиса
```bash
docker-compose up -d
```

> **Важно:** Если вы не создали файл `.env`, будут использованы значения по умолчанию из `docker-compose.yml`

#### Шаг 5: Проверка работы
Откройте браузер и перейдите по адресу: `http://localhost:8001`

### Развертывание на поддомене с Cloudflare

#### Подготовка домена

1. **Настройка DNS в Cloudflare:**
   - Войдите в панель управления Cloudflare
   - Выберите ваш домен
   - Перейдите в раздел "DNS"
   - Добавьте A-запись для поддомена:
     - Тип: A
     - Имя: `cursor` (или любое другое для поддомена)
     - IPv4 адрес: IP-адрес вашего сервера
     - Прокси-статус: Включен (оранжевое облачко)

2. **Настройка переадресации email:**
   - В Cloudflare перейдите в раздел "Email"
   - Настройте Email Routing для вашего домена
   - Создайте правило переадресации для поддомена

#### Настройка Caddy для поддомена

Создайте новый Caddyfile для поддомена:

```caddyfile
# Caddyfile для поддомена
cursor.yourdomain.com {
    # Включение gzip сжатия
    encode gzip

    # Проксирование запросов к приложению
    reverse_proxy localhost:8001 {
        health_path /api/health
        health_interval 30s
        health_timeout 5s
        health_status 200
        header_up Host {host}
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
        transport http {
            keepalive 60s
        }
    }

    # Настройки безопасности
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        Referrer-Policy "strict-origin-when-cross-origin"
        X-XSS-Protection "1; mode=block"
        -Server
    }

    # Логирование
    log {
        output file /var/log/caddy/cursor-subdomain.log
        format json
        level INFO
    }
}
```

#### Решение конфликтов портов

Если основной домен уже использует порт 8001, измените порт в `.env` файле:

```env
PORT=8002
```

И обновите Caddyfile:
```caddyfile
cursor.yourdomain.com {
    reverse_proxy localhost:8002 {
        # ... остальные настройки
    }
}
```

Также обновите `docker-compose.yml`:
```yaml
ports:
  - "8002:8002"  # Измененный порт
  - "9223:9223"
```

#### Запуск с новыми настройками

```bash
# Остановите текущие контейнеры
docker-compose down

# Запустите с новыми настройками
docker-compose up -d
```

### Развертывание с помощью Docker (без Docker Compose)

Если вы не хотите использовать Docker Compose, можете развернуть напрямую с помощью Docker:

#### Шаг 1: Сборка Docker образа
```bash
docker build -t cursor-auto-account .
```

#### Шаг 2: Запуск Docker контейнера
```bash
docker run -d --name cursor-account \
  -p 8001:8001 \
  -p 9223:9223 \
  -e DB_HOST=your_db_host \
  -e DB_USER=your_db_user \
  -e DB_PASSWORD=your_db_password \
  -e DB_NAME=your_db_name \
  -e DB_PORT=3306 \
  -e SECRET_KEY=your_secret_key \
  -e ADMIN_USERNAME=admin \
  -e ADMIN_PASSWORD=your_admin_password \
  -e EMAIL_DOMAIN=your_email_domain \
  cursor-auto-account
```

> **Важно:** Замените параметры подключения к базе данных на ваши собственные настройки

### О порте отладки Chrome

- Порт отладки Chrome внутри контейнера: 9222
- Через socat порт 9222 контейнера перенаправляется на порт 9223, доступный извне
- Вы можете подключиться к интерфейсу отладки Chrome, перейдя по адресу `http://localhost:9223`

#### Объяснение перенаправления портов через socat

Этот проект использует инструмент socat для перенаправления портов, который перенаправляет порт отладки Chrome (9222) внутри контейнера на порт, доступный извне (9223). Преимущества такого подхода:

1. Решает ограничение порта отладки Chrome, который слушает только на 127.0.0.1
2. Позволяет хосту и другим сетевым устройствам напрямую обращаться к функциям отладки Chrome
3. Не требует изменения параметров запуска или конфигурации Chrome

socat автоматически запускается при старте контейнера, дополнительная настройка не требуется.

### Локальная разработка

Если вы хотите запустить проект в локальной среде разработки:

#### Шаг 1: Установка зависимостей
```bash
pip install -r requirements.txt
# Или используйте uv для ускорения установки
uv pip install -r requirements.txt
```

#### Шаг 2: Запуск проекта
```bash
python app.py
```

#### Шаг 3: Доступ к сервису
- Веб-интерфейс: http://localhost:8001

## Устранение неполадок

### Проблемы с подключением к базе данных
- Убедитесь, что MySQL сервер запущен
- Проверьте правильность настроек в `.env` файле
- Убедитесь, что пользователь имеет права доступа к базе данных

### Проблемы с портами
- Проверьте, что порты 8001 и 9223 не заняты другими приложениями
- Используйте команду `netstat -tulpn | grep :8001` для проверки

### Проблемы с Docker
- Убедитесь, что Docker и Docker Compose установлены
- Проверьте логи контейнера: `docker-compose logs app`

## Отказ от ответственности

1. Этот проект предназначен только для обучения и технических исследований, не может использоваться в коммерческих целях
2. Любая юридическая ответственность, возникающая в результате использования этого проекта, лежит на пользователе
3. Этот проект не гарантирует долгосрочную доступность созданных аккаунтов, изменения политики Cursor могут привести к неработоспособности функций
4. Пожалуйста, соблюдайте условия обслуживания Cursor и разумно используйте созданные аккаунты
5. Разработчики проекта не несут ответственности за любые проблемы, возникшие в результате использования этого инструмента

## История звезд

[![Star History Chart](https://api.star-history.com/svg?repos=zoowayss/cursor-auto-account&type=Date)](https://www.star-history.com/#zoowayss/cursor-auto-account&Date)

## Лицензия

MIT